import{Positions as t}from"./interfaces.js";import{transformSpacedStringToArray as e,removePrefix as o,capitalizeFirstLetter as i}from"../utils/string.js";import{setAttributes as n,getWindowDimensions as r}from"../utils/dom.js";import{isNil as s}from"../utils/identity.js";import{updateElementStyles as p,getCssPropertyValue as f}from"../utils/css.js";import{sumAndSubtract as u}from"../utils/math.js";import{getEnumValueFromStringKey as c}from"../utils/enum.js";function a(t,e,o,i,n){const r={mainAxisOffset:0,crossAxisOffset:0},p=o&&"default"===o.type;return s(t)?p&&(r.mainAxisOffset=-10):r.mainAxisOffset=t,s(e)?p&&"end"===i&&"start"===n&&(r.crossAxisOffset=-10):r.crossAxisOffset=e,r}function l(t){t.removeAttribute("responsive");const e=a(t.mainAxisOffset,t.crossAxisOffset,t.pointer,t.pointerAlign,t.anchorAlign),o=O(t.orientation,t.anchorRect,t.anchorAlign,t.pointer,t.pointerAlign,t.contentWrapper,e.mainAxisOffset,e.crossAxisOffset);if(!1===o)n(t,["responsive",""],["_position-at",!1]),p(t.hostWrapper,["position",""],["top",""],["left",""]),p(t.pointerWrapper,["visibility","hidden"]);else{if(t.pointer){const e=o.pointer;p(t.pointerWrapper,["visibility","visible"]),n(t,["_pointer-type",t.pointer.type||!1]),n(t,["_position-at",e.location])}else p(t.pointerWrapper,["visibility","hidden"]),n(t,["_position-at",!1],["_pointer-type",!1]);const e=o.popup.top+"px",i=o.popup.left+"px";p(t.hostWrapper,["position","absolute"],["top",e],["left",i])}}function h(n){const r=[],s=[];for(const p of e(n)){if("none"===p)return[[],0];if(p.indexOf("only:")>-1)return[[c(t,o(p,"only:"),i)],0];if(p.indexOf("not:")>-1)s.push(c(t,o(p,"not:"),i));else{const e=c(t,p,i);s.push(e),r.push(e)}}return[r,u(0,[t.All],s)]}function m(t){switch(t){case"mid":return[1,0,2];case"end":return[2,1,0];case"start":default:return[0,1,2]}}function d(e,o,i){var n;if(!1===o)return!1;const r=o[null===(n=t[e])||void 0===n?void 0:n.toLowerCase()];if(!r)return!1;const[s,p,f]=r;if(!1===s&&!1===p&&!1===f)return!1;for(const t of m(i))if(r[t])return Object.assign({},r[t]);return!1}function g(e){const o=[t.Bottom,t.Right,t.Left,t.Top,t.Responsive];for(const t of o)if(e>=t)return[t,e-t];return[0,0]}function b(e,o){if(e.length<1){const[t,i]=g(o);return[t,e,i]}return[e[0],e.slice(1),e[0]!==t.Responsive?o:0]}function w(t){switch(t.toLowerCase()){case"top":return"popup-bottom";case"bottom":return"popup-top";case"left":return"popup-right";case"right":default:return"popup-left"}}function x(t,e){let o;return o="popup-bottom"===t||"popup-top"===t?{start:"pointer-left",mid:"pointer-center",end:"pointer-right"}:{start:"pointer-top",mid:"pointer-mid",end:"pointer-bottom"},o[e]}function A(e,o,i){let[n,r]=o,s=null;for(;null===s;){const[o,p,f]=b(n,r),u=d(o,e,i);switch(!0){case!1!==u:s=Object.assign({},u,{pointer:{location:w(t[o])}});break;case!1===u&&0===f:s=!1;break;case!1===u:n=p,r=f}}return s}function O(t,e,o,i,n,s,p,u){if(!e)return!1;const c=i?i.offsetHeight:0,a=r();if(a.width<=parseInt(f("--cds-global-layout-width-xs-static"),10))return!1;const l=A(v(e,c,n,s.getBoundingClientRect(),a,p,u),h(t),o);if(!1===l)return!1;const m=l.pointer.location,d=m+" "+x(m,n);return Object.assign({},l,{pointer:{size:c,location:d}})}function v(t,e,o,i,n,r,s){return{top:y("top",o,t,i,e,n,r,s),right:y("right",o,t,i,e,n,r,s),bottom:y("bottom",o,t,i,e,n,r,s),left:y("left",o,t,i,e,n,r,s)}}function y(t,e,o,i,n,r,s,p){let f;switch(t){case"top":return f=L(o.top,n,i.height,s,0),!1!==f&&C(o.left,o.width,i.width,p,0,r.width,e).map((t=>!1!==t&&{popup:{top:f,left:t}}));case"bottom":return f=L(o.bottom,0,i.height,s,r.height),!1!==f&&C(o.left,o.width,i.width,p,0,r.width,e).map((t=>!1!==t&&{popup:{top:f,left:t}}));case"left":return f=L(o.left,n,i.width,s,0),!1!==f&&C(o.top,o.height,i.height,p,0,r.height,e).map((t=>!1!==t&&{popup:{top:t,left:f}}));case"right":return f=L(o.right,0,i.width,s,r.width),!1!==f&&C(o.top,o.height,i.height,p,0,r.height,e).map((t=>!1!==t&&{popup:{top:t,left:f}}))}}function j(t,e,o,i,n){return 0===n?u(t,[],[e,o,i]):u(t,[e,o,i],[])}function W(t,e,o){return 0===o?t>o&&t:t<o&&e}function R(t,e,o,i,n,r=0){switch(t){case"mid":return e+o*i-.5*r+n;case"end":return e+o*i-n;case"start":return e+o*i+n}}function _(t,e,o,i){const[n,r]=i;switch(t){case"mid":return e>n&&e+o<r&&e;case"end":{const t=e-o;return t>n&&t}case"start":return e+o<r&&e}}function C(t,e,o,i,n,r,s){return[0,.5,1].map((p=>_(s,R(s,t,p,e,i,o),o,[n,r])))}function L(t,e,o,i,n=0){return W(j(t,e,o,i,n),t+i,n)}export{d as checkNextPosition,A as getBestPositionForPreferences,m as getCrossAxisOrderOfPreference,R as getCrossAxisPosition,j as getMainAxisPosition,L as getMainAxisPositionOrViolation,g as getNextDefaultPosition,b as getNextPosition,h as getOrientationTuple,x as getPointerAlignment,w as getPointerPosition,a as getPopupOffsetOrDefaultOffsets,O as getPopupPosition,y as getPositionConfig,C as getPositionOrViolationFromCrossAxis,v as getPositions,l as setPopupPosition,_ as testCrossAxisPosition,W as testMainAxisPosition};
//# sourceMappingURL=utils.js.map
