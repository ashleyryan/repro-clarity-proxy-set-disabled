import{__decorate as t}from"tslib";import{AriaPopupController as e,I18nService as o,getElementUpdates as r,setPopupPosition as i,setAttributes as p,isScrollable as s,baseStyles as n,i18n as d,property as a,state as c,event as l,querySlot as h,animate as v,reverseAnimation as y,AnimationResponsivePopupEnterName as u}from"@cds/core/internal";import{html as m}from"lit";import{query as g}from"lit/decorators/query.js";import{CdsInternalStaticOverlay as f}from"@cds/core/internal-components/overlay";import b from"../overlay/shared.element.scss.js";import S from"./popup.element.scss.js";let A=class extends f{constructor(){super(...arguments),this.ariaPopupController=new e(this),this.i18n=o.keys.popup,this.cdsMotion="on",this.responsive=!1,this.anchorAlign="start",this.pointerAlign="start",this.observers=[]}get anchorElement(){const t=this.anchor;if("string"==typeof t){const e=this.getRootNode().querySelector("#"+t);return null===e?this.getRootNode({composed:!0}).querySelector("#"+this.anchor):e}return t}get anchorRect(){var t;return(null===(t=this.anchorElement)||void 0===t?void 0:t.getBoundingClientRect())||new DOMRect}setUpPositioningObserver(){this.observers.push(r(this,"hidden",(()=>{!1===this.hidden&&i(this)})))}disconnectedCallback(){super.disconnectedCallback(),this.observers.forEach((t=>t.disconnect()))}firstUpdated(t){super.firstUpdated(t),this.setUpPositioningObserver()}updated(t){this.pointer&&!this.pointer.hasAttribute("part")&&p(this.pointer,["part","pointer"]),t.has("hidden")&&p(this.contentWrapper,["tabindex",!!s(this.contentWrapper)&&"0"]),super.updated(t)}render(){return m`${this.backdropTemplate}<div class="private-host" tabindex="-1"><div cds-layout="display:screen-reader-only">${this.i18n.contentStart}</div><div class="popup-wrapper"><div class="popup-content">${this.closable||this.responsive?this.closeButtonTemplate:""}<slot></slot></div><div class="pointer-wrapper"><div class="popup-pointer"><slot name="pointer"></slot></div></div></div><div cds-layout="display:screen-reader-only">${this.i18n.contentEnd}</div></div>`}static get styles(){return[n,S,b]}};t([d()],A.prototype,"i18n",void 0),t([a({type:String})],A.prototype,"cdsMotion",void 0),t([c({type:Boolean,reflect:!0,attribute:"responsive"})],A.prototype,"responsive",void 0),t([l()],A.prototype,"cdsMotionChange",void 0),t([a({type:String,reflect:!0})],A.prototype,"anchor",void 0),t([a({type:String})],A.prototype,"anchorAlign",void 0),t([a({type:Number})],A.prototype,"mainAxisOffset",void 0),t([a({type:Number})],A.prototype,"crossAxisOffset",void 0),t([a({type:String})],A.prototype,"orientation",void 0),t([a({type:Boolean})],A.prototype,"closable",void 0),t([a({type:String})],A.prototype,"pointerAlign",void 0),t([h("cds-internal-pointer",{assign:"pointer"})],A.prototype,"pointer",void 0),t([g(".popup-pointer")],A.prototype,"pointerWrapper",void 0),t([g(".private-host")],A.prototype,"hostWrapper",void 0),t([g(".popup-wrapper")],A.prototype,"popupWrapper",void 0),t([g(".popup-content")],A.prototype,"contentWrapper",void 0),A=t([v({hidden:{true:y(u),false:u}})],A);export{A as CdsInternalPopup};
//# sourceMappingURL=popup.element.js.map
